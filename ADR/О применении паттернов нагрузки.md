**Дата:** 21 ноября 2025г.

**Статус:** Принято

**Контекст:**
Для обеспечения надёжности, масштабируемости и высокой производительности системы поиска и резервирования билетов на концерты необходимо определить, какие архитектурные паттерны нагрузки могут быть применены в различных её компонентах. Анализ проводится на основе перечня распространённых архитектурных паттернов, каждый из которых может обеспечить выполнение определённых нефункциональных требований: производительность, надежность, доступность, упрощение масштабирования, оптимизация вычислительных ресурсов.

**Рассмотренные варианты:**

#### 1. Трёхзвенная структура:
Классическая модель с разделением на интерфейс, бизнес-логику и данные. Создаёт контролируемую архитектуру и позволяет независимо развивать слои.

#### Плюсы:

- Чёткое разделение ответственности
- Упрощает поддержку и развитие
- Повышает модульность

#### Минусы:

- Увеличивает сложность архитектуры
- Может вести к избыточности в небольших проектах

#### 2. Кеширование
Хранит часто используемые данные в быстром хранилище, снижая нагрузку на основной источник. Уменьшает время отклика.

#### Плюсы:

- Быстрый доступ к часто запрашиваемым данным
- Снижает нагрузку на базу данных
- Экономия ресурсов

#### Минусы:

- Устаревание данных
- Сложность управления кэшем
- Необходимость в дополнительных ресурсах памяти

#### 3. Толстый клиент
Часть логики переносится на клиентское устройство, уменьшая количество запросов к серверу. Подходит там, где важна автономность и минимизация серверной нагрузки.

#### Плюсы:
- Уменьшение нагрузки на сервер
- Возможность автономной работы

#### Минусы:
- Увеличение сложности клиента
- Требуются ресурсы у пользователя

#### 4. Деградация функциональности
Система отключает второстепенные функции под высокой нагрузкой. Позволяет сохранить доступность критичных операций.

#### Плюсы:
- Повышение доступности системы при нагрузке
- Защита критичных функций

#### Минусы:
- Потеря части возможностей для пользователя
- Может усложнить UX

#### 5. Вертикальное масштабирование
Увеличение ресурсов сервера без изменения архитектуры системы. Позволяет быстро повысить производительность ключевых узлов.

#### Плюсы:
- Быстрый рост производительности
- Простое внедрение на начальных этапах

#### Минусы:
- Ограничено ресурсами одного сервера
- Высокая стоимость апгрейда

#### 6. Функциональное разделение
Разделяет систему на независимые логические модули, каждый со своей ответственностью. Уменьшает взаимное влияние подсистем при росте нагрузки.

#### Плюсы:
- Повышение модульности
- Лёгкое масштабирование отдельных компонентов

#### Минусы:
- Усложнение интеграции
- Повышенные требования к взаимодействию между модулями

#### 7. Горизонтальное масштабирование
Добавление новых узлов, работающих параллельно. Увеличивает общую пропускную способность системы.

#### Плюсы:
- Масштабируемость по мере роста нагрузки
- Высокая отказоустойчивость

#### Минусы:
- Требует инфраструктуры (балансировщики, кластеризация)
- Усложнение системы управления

#### 8. SOA
Разделение системы на автономные сервисы, взаимодействующие через стандартизированные интерфейсы. Улучшает модульность и масштабируемость больших систем.

#### Плюсы:
- Хорошая модульность
- Лёгкое масштабирование и обновление
- Возможность переиспользования сервисов

#### Минусы:
- Повышенная сложность разработки и поддержки
- Требуются стандарты взаимодействия

#### 9. Монолитное приложение
Вся логика и данные расположены в одном приложении. Простое в начале, но со временем теряет масштабируемость.

#### Плюсы:
- Простая разработка на ранних этапах
- Меньше компонентов для управления

#### Минусы:
- Трудно масштабировать
- Рефакторинг сложен

#### 10. Отложенные вычисления
Перенос тяжёлых операций в фоновый режим или на более поздний момент. Снижает нагрузку в пиковые периоды.

#### Плюсы:
- Снижение нагрузки в пиковые периоды
- Эффективное использование ресурсов

#### Минусы:
- Задержки в выполнении
- Сложности с управлением очередями

#### 11. Асинхронная обработка
Операции выполняются параллельно, не блокируя основной поток. Увеличивает пропускную способность и снижает задержки.

#### Плюсы:
- Повышение пропускной способности
- Меньшее время отклика
- Уменьшение блокировок

#### Минусы:
- Повышенная сложность логики
- Требование к управлению состояниями

#### 12. Конвейер
Разделение обработки запроса на шаги, организованные последовательно. Позволяет выполнять части работы независимо и повышает эффективность.

#### Плюсы:
- Можно параллелить этапы
- Повышает эффективность

#### Минусы:
- Сложность отладки
- Требования к синхронизации

#### 13. Репликация
Создание копий данных на нескольких серверах. Повышает доступность и распределяет нагрузку на чтение.

#### Плюсы:
- Повышенная доступность
- Улучшенная производительность чтения
- Географическое распределение

#### Минусы:
- Сложность управления
- Задержки при записи
- Повышенные затраты на инфраструктуру

#### 14. Вертикальный шардинг
Разделение таблиц одной логической базы данных между разными серверами на основе их принадлежности к доменным областям.

#### Плюсы:
- Разделение данных по логическим областям
- Можно оптимизировать отдельные части

#### Минусы:
- Повышенная сложность проектирования
- Требует изменения логики доступа

#### 15. Горизонтальный шардинг
Разбиение одной большой таблицы на части по ключу. Масштабирует объём данных и снижает нагрузку на отдельные узлы.

#### Плюсы:
- Масштабируемость по объёму данных
- Уменьшение нагрузки на узлы

#### Минусы:
- Усложнение запросов
- Требуется маршрутизация данных

#### 16. Виртуальные шарды
Дополнительный слой абстракции над шардами, позволяющий гибко перераспределять данные без изменения логики приложения. Упрощает масштабирование в долгосрочной перспективе.

#### Плюсы:
- Гибкое перераспределение данных
- Упрощение масштабирования

#### Минусы:
- Дополнительная абстракция
- Усложнение конфигурации и мониторинга

#### 17. Центральный диспетчер
Единая точка маршрутизации, распределяющая задачи или события между компонентами. Обеспечивает централизованный контроль сложных процессов.

#### Плюсы:
- Централизованное управление
- Упрощение маршрутизации задач

#### Минусы:
- Единая точка отказа
- Могут возникнуть узкие места

#### 18. Партиционирование
Логическое разделение таблиц на части для ускорения запросов и упрощения управления большими объёмами данных. Улучшает производительность операций чтения и очистки.

#### Плюсы:
- Ускорение запросов
- Упрощение управления большими объёмами данных

#### Минусы:
- Требует изменения логики базы
- Возможна сложность при обновлениях

#### 19. Денормализация
Хранение заранее агрегированных или продублированных данных. Уменьшает сложность запросов и ускоряет аналитические операции.

#### Плюсы:
- Быстрые аналитические запросы
- Уменьшение джойнов

#### Минусы:
- Повышенная сложность поддержки целостности данных
- Сложное обновление данных

#### 20. Введение избыточности
Создание дополнительных элементов (данных, сервисов, серверов) для повышения устойчивости. Позволяет системе продолжать работу при сбоях.

#### Плюсы:
- Повышение отказоустойчивости
- Быстрое восстановление при сбоях

#### Минусы:
- Увеличение затрат
- Риск рассогласования данных

#### 21. Параллельное выполнение
Разделение задач на независимые части и их одновременная обработка. Сокращает общее время выполнения сложных операций.

#### Плюсы:
- Значительное сокращение общего времени
- Эффективно для больших задач

#### Минусы:
- Сложность синхронизации
- Возможность гонок данных при неправильной реализации

#### 22. Специализированные серверы
Использование инфраструктуры, оптимизированной под конкретную задачу (например, сервер для БД или очередей). Повышает эффективность критичных подсистем.

#### Плюсы:
- Максимальная эффективность
- Повышенная производительность

#### Минусы:
- Высокая стоимость
- Меньшая гибкость инфраструктуры

#### 23. Comet-сервер
Поддерживает постоянное соединение с клиентом для push-уведомлений. Позволяет передавать обновления в реальном времени.

#### Плюсы:
- Передача обновлений в реальном времени
- Постоянное соединение с клиентом

#### Минусы:
- Высокие требования к инфраструктуре
- Ограничения по масштабированию


**Решение:**  
Для обеспечения высокой производительности, масштабируемости и отказоустойчивости системы поиска и резервирования билетов на концерты применяются следующие паттерны нагрузки:

- **Горизонтальное масштабирование**
- **Кеширование**
- **Асинхронная обработка**
- **Функциональное разделение**
- **Репликация**
- **Отложенные вычисления**

Эти паттерны формируют основу устойчивой архитектуры, способной выдерживать пиковые нагрузки, обеспечивая стабильную работу критичных бизнес-функций.

**Обоснование:**

- **Горизонтальное масштабирование** позволяет добавлять новые серверы для увеличения пропускной способности при росте нагрузки, что особенно важно для обработки многочисленных запросов одновременно (поиск, резервирование, оповещения). (SCA01-SCA05, PER03, PRN04)

- **Кеширование** (например, кеш данных о популярных концертах) снижает нагрузку на базу данных и уменьшает время отклика, повышая пользовательский опыт. (PER06, PER09)

- **Асинхронная обработка** обеспечивает выполнение тяжелых операций (например, подтверждения резервирования, отправки уведомлений) в фоновом режиме, разгружая основное приложение и повышая пропускную способность. (PER04, PER07)

- **Функциональное разделение** (например, отдельные сервисы для поиска мероприятий, заказов, оповещений) повышает модульность системы, упрощает масштабирование и изменение отдельных компонентов без воздействия на остальные. (SCA05, PRN05)

- **Репликация данных** (например, репликационные базы данных для чтения) позволяет распределить нагрузку, увеличивая скорость чтения и повышая отказоустойчивость. (SCA01-SCA04, DUR05)

- **Отложенные вычисления** (например, обработка отчетов или аналитики) позволяют выполнять ресурсоемкие операции в поздние периоды, снижая нагрузку в пиковые часы. (PER08)

**Последствия:**

- Требуется настройка и управление инфраструктурой для поддержки горизонтального масштабирования, включая балансировщики нагрузки и автоматическое масштабирование серверных узлов.

- Внедрение кеширования требует механизма обеспечения актуальности данных (например, TTL или invalidate-стратегии) и резервирования кеша.

- Асинхронность и отложенные вычисления требуют разработки системы очередей сообщений или менеджеров задач, что повышает сложность архитектуры.

- Необходимость обслуживания репликационных баз данных и согласования данных между ними, чтобы избежать расхождения или потери данных.

- Внедрение решений для функционального разделения и взаимодействия сервисов потребует дополнительных усилий по проектированию интерфейсов и обеспечению устойчивых взаимодействий.

- Все паттерны требуют мониторинга, логирования и системы контроля, чтобы обеспечить своевременное выявление и устранение узких мест.

